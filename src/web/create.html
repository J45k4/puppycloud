<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>PuppyCloud • Create Resource</title>
		<style>
			:root {
				color-scheme: light dark;
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				background-color: #0d1117;
				color: #f0f6fc;
			}

			body {
				margin: 0;
				background:
					linear-gradient(
						180deg,
						rgba(13, 17, 23, 0.95) 0%,
						rgba(13, 17, 23, 0.75) 100%
					),
					url("https://images.unsplash.com/photo-1451188502541-13943edb6acb?auto=format&fit=crop&w=1400&q=80")
						center/cover fixed;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
			}

			header {
				backdrop-filter: blur(12px);
				background-color: rgba(13, 17, 23, 0.8);
				padding: 24px 10vw;
				display: flex;
				align-items: center;
				justify-content: space-between;
				box-shadow: 0 2px 18px rgba(0, 0, 0, 0.35);
				position: sticky;
				top: 0;
				z-index: 10;
			}

			header h1 {
				margin: 0;
				font-size: 1.5rem;
				letter-spacing: 0.04em;
			}

			header nav {
				display: flex;
				gap: 16px;
			}

			header nav a {
				text-decoration: none;
				color: inherit;
				font-weight: 500;
				padding: 8px 16px;
				border-radius: 999px;
				transition:
					background-color 150ms ease,
					transform 150ms ease;
			}

			header nav a:hover,
			header nav a:focus {
				background-color: rgba(56, 139, 253, 0.2);
				transform: translateY(-1px);
			}

			main {
				padding: 48px 10vw 64px;
				display: grid;
				gap: 32px;
			}

			.page-heading {
				display: grid;
				gap: 12px;
			}

			.form-section {
				display: grid;
				gap: 20px;
				background-color: rgba(13, 17, 23, 0.85);
				border: 1px solid rgba(240, 246, 252, 0.08);
				border-radius: 16px;
				padding: 28px;
				box-shadow: 0 18px 45px rgba(0, 0, 0, 0.28);
			}

			.form-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
				gap: 18px 24px;
			}

			label {
				display: flex;
				flex-direction: column;
				font-size: 0.9rem;
				gap: 8px;
			}

			input,
			select,
			textarea {
				padding: 12px 14px;
				border-radius: 10px;
				border: 1px solid rgba(240, 246, 252, 0.2);
				background-color: rgba(1, 4, 9, 0.6);
				color: inherit;
				font-size: 1rem;
				transition:
					border-color 150ms ease,
					box-shadow 150ms ease;
			}

			input:focus,
			select:focus,
			textarea:focus {
				border-color: rgba(56, 139, 253, 0.6);
				box-shadow: 0 0 0 4px rgba(56, 139, 253, 0.25);
				outline: none;
			}

			textarea {
				min-height: 96px;
				resize: vertical;
			}

			.actions {
				display: flex;
				gap: 12px;
				flex-wrap: wrap;
				justify-content: flex-end;
			}

			button {
				padding: 12px 24px;
				border-radius: 999px;
				border: none;
				font-size: 1rem;
				font-weight: 600;
				cursor: pointer;
				transition:
					transform 150ms ease,
					box-shadow 150ms ease;
			}

			button.primary {
				background: linear-gradient(135deg, #388bfd 0%, #1f6feb 100%);
				color: white;
				box-shadow: 0 18px 30px rgba(56, 139, 253, 0.35);
			}

			button.secondary {
				background-color: transparent;
				color: inherit;
				border: 1px solid rgba(240, 246, 252, 0.2);
			}

			button:hover,
			button:focus {
				transform: translateY(-1px);
			}

			button.primary:hover,
			button.primary:focus {
				box-shadow: 0 22px 35px rgba(56, 139, 253, 0.5);
			}

			footer {
				margin-top: auto;
				padding: 24px 10vw 32px;
				text-align: center;
				font-size: 0.85rem;
				opacity: 0.6;
			}

			@media (max-width: 768px) {
				header {
					flex-direction: column;
					align-items: flex-start;
					gap: 16px;
				}

				header nav {
					width: 100%;
					flex-wrap: wrap;
				}

				header nav a {
					padding: 8px 12px;
				}
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Create a PuppyCloud resource</h1>
			<nav>
				<a href="/">Dashboard</a>
				<a href="#">Docs</a>
				<a href="mailto:support@puppycloud.example">Support</a>
			</nav>
		</header>
		<main>
			<section class="page-heading">
				<h2>Create a container</h2>
				<p>Fill in the details below to launch a new Docker container. Once you submit, PuppyCloud will create and start the container.</p>
			</section>
			<section class="form-section">
				<form id="createForm" class="form-grid">
					<label>
						Container Name
						<input type="text" name="name" placeholder="e.g. my-web-server">
					</label>
					<label>
						Container Image
						<input type="text" name="image" placeholder="e.g. nginx:latest" required>
					</label>
					<label style="grid-column: 1 / -1">
						Command (optional)
						<input type="text" name="command" placeholder="e.g. npm start">
					</label>
					<div id="statusMessage" style="grid-column: 1 / -1; display: none; padding: 12px; border-radius: 8px; font-weight: 500;"></div>
					<div class="actions" style="grid-column: 1 / -1">
						<button type="reset" class="secondary">Reset</button>
						<button type="submit" class="primary" id="submitBtn">Create Container</button>
					</div>
				</form>
			</section>
		</main>
		<footer>
			© <span id="year"></span>PuppyCloud. Secure infrastructure for ambitious teams.
		</footer>
		<script>
			document.getElementById("year").textContent = new Date().getFullYear();

			const form = document.getElementById("createForm");
			const submitBtn = document.getElementById("submitBtn");
			const statusMessage = document.getElementById("statusMessage");

			function showMessage(message, isError = false) {
				statusMessage.textContent = message;
				statusMessage.style.display = "block";
				statusMessage.style.backgroundColor = isError
					? "rgba(248, 81, 73, 0.2)"
					: "rgba(46, 160, 67, 0.2)";
				statusMessage.style.color = isError ? "#f85149" : "#2ea043";
				statusMessage.style.border = isError
					? "1px solid rgba(248, 81, 73, 0.4)"
					: "1px solid rgba(46, 160, 67, 0.4)";
			}

			form.addEventListener("submit", async (e) => {
				e.preventDefault();

				const formData = new FormData(form);
				const data = {
					name: formData.get("name"),
					image: formData.get("image"),
					command: formData.get("command") || undefined
				};

				submitBtn.disabled = true;
				submitBtn.textContent = "Creating...";
				statusMessage.style.display = "none";

				try {
					const response = await fetch("/api/containers", {
						method: "POST",
						headers: {
							"Content-Type": "application/json"
						},
						body: JSON.stringify(data)
					});

					const result = await response.json();

					if (response.ok) {
						showMessage(`Container created successfully! ID: ${result.instance.id}`);
						setTimeout(() => {
							window.location.href = "/";
						}, 2000);
					} else {
						showMessage(result.error || "Failed to create container", true);
						submitBtn.disabled = false;
						submitBtn.textContent = "Create Container";
					}
				} catch (error) {
					showMessage(
						error instanceof Error ? error.message : "Network error occurred",
						true
					);
					submitBtn.disabled = false;
					submitBtn.textContent = "Create Container";
				}
			});
		</script>
	</body>
</html>
